<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0091)http://www.angularjsapi.cn/hetao/a/Angularjsjiaocheng/yuanshengjsxiangjie/2016/0520/31.html -->
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>雅虎团队经验：网站页面性能优化的 34条（一）</title>

    <meta name="description" content="">
    <meta name="keywords" content="">
    <link rel="stylesheet" href="./雅虎团队经验：网站页面性能优化的 34条（一）_files/style.css" type="text/css" media="screen">
    <link rel="stylesheet" href="./雅虎团队经验：网站页面性能优化的 34条（一）_files/jquery.fancybox-1.3.4.css" type="text/css" media="screen">

    <!-- conditional css -->
    <style type="text/css">
        body {
            background: #eee url(images/bg_light_linen.png) fixed;
        }

        a {
            color: #68AECF;
        }




        #wrapper {
            margin: 0 auto !important;
        }

        #next_arrow {
            right: 410px !important;
            left: auto !important;
        }

        .top-bar {
            left: auto !important;
            margin: 0 auto !important;
        }

        .social {
            width: 941px !important;
        }
    </style>
</head>

<body class="archive category category-photography category-15">
    <div id="wrapper" class="clearfix">
        ﻿<div class="top-bar">
    <div class="frame">
        <div class="frame-inside">
            <!-- header navigation menu -->
            <div class="menu-header-container">
                <ul id="menu-header" class="nav">
                    <li id="menu-item-109" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-109"><a href="http://www.angularjsapi.cn/hetao">首页</a></li>
                    <li id="menu-item-85" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-85">
                        <a id="1" href="http://www.angularjsapi.cn/hetao/a/Angularjsjiaocheng/">js教程</a>
                        <ul class="sub-menu">
                            
                            <li id="menu-item-36" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-36"><a href="http://www.angularjsapi.cn/hetao/a/Angularjsjiaocheng/Angularjsjiaocheng/">Angularjs教程</a></li>
                            
                            <li id="menu-item-36" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-36"><a href="http://www.angularjsapi.cn/hetao/a/Angularjsjiaocheng/jQuery/">jQuery深入解析</a></li>
                            
                            <li id="menu-item-36" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-36"><a href="http://www.angularjsapi.cn/hetao/a/Angularjsjiaocheng/yuanshengjsxiangjie/">原生js详解</a></li>
                            
                            <!--<li id="menu-item-37" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-37"><a href="sample-page.html">Sample Page</a>
                                <ul class="sub-menu">
                                    <li id="menu-item-38" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38"><a href="sample-page.html">Sample Page</a></li>
                                    <li id="menu-item-41" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-41"><a href="sample-page.html">Sample Page</a>
                                    <ul class="sub-menu">
                                        <li id="menu-item-42" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-42"><a href="sample-page.html">Sample Page</a></li>
                                        <li id="menu-item-86" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-86"><a href="sample-page.html">Sample Page</a></li>
                                    </ul>
                            </li>
                                </ul>
                            </li>-->
                             
                        </ul>
                    </li><li id="menu-item-85" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-85">
                        <a id="3" href="http://www.angularjsapi.cn/hetao/a/mianshiti/">面试题</a>
                        <ul class="sub-menu">
                            
                            <li id="menu-item-36" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-36"><a href="http://www.angularjsapi.cn/hetao/a/mianshiti/qianduanmianshiti/">前端面试题</a></li>
                            
                            <!--<li id="menu-item-37" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-37"><a href="sample-page.html">Sample Page</a>
                                <ul class="sub-menu">
                                    <li id="menu-item-38" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38"><a href="sample-page.html">Sample Page</a></li>
                                    <li id="menu-item-41" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-41"><a href="sample-page.html">Sample Page</a>
                                    <ul class="sub-menu">
                                        <li id="menu-item-42" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-42"><a href="sample-page.html">Sample Page</a></li>
                                        <li id="menu-item-86" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-86"><a href="sample-page.html">Sample Page</a></li>
                                    </ul>
                            </li>
                                </ul>
                            </li>-->
                             
                        </ul>
                    </li><li id="menu-item-85" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-85">
                        <a id="8" href="http://www.angularjsapi.cn/hetao/a/Webpack/">Webpack</a>
                        <ul class="sub-menu">
                            
                            <!--<li id="menu-item-37" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-37"><a href="sample-page.html">Sample Page</a>
                                <ul class="sub-menu">
                                    <li id="menu-item-38" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38"><a href="sample-page.html">Sample Page</a></li>
                                    <li id="menu-item-41" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-41"><a href="sample-page.html">Sample Page</a>
                                    <ul class="sub-menu">
                                        <li id="menu-item-42" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-42"><a href="sample-page.html">Sample Page</a></li>
                                        <li id="menu-item-86" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-86"><a href="sample-page.html">Sample Page</a></li>
                                    </ul>
                            </li>
                                </ul>
                            </li>-->
                             
                        </ul>
                    </li><li id="menu-item-85" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-85">
                        <a id="9" href="http://www.angularjsapi.cn/hetao/a/CSS/">CSS</a>
                        <ul class="sub-menu">
                            
                            <!--<li id="menu-item-37" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-37"><a href="sample-page.html">Sample Page</a>
                                <ul class="sub-menu">
                                    <li id="menu-item-38" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38"><a href="sample-page.html">Sample Page</a></li>
                                    <li id="menu-item-41" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-41"><a href="sample-page.html">Sample Page</a>
                                    <ul class="sub-menu">
                                        <li id="menu-item-42" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-42"><a href="sample-page.html">Sample Page</a></li>
                                        <li id="menu-item-86" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-86"><a href="sample-page.html">Sample Page</a></li>
                                    </ul>
                            </li>
                                </ul>
                            </li>-->
                             
                        </ul>
                    </li>
                    &lt;<!--li id="menu-item-218" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-218"><a href="contact.html">Contact</a></li>-->
                </ul>
            </div>
            <!--<ul class="style-switcher nav">
                <li><a href="#">BG Demo</a>
                    <ul class="sub-menu">
                        <li class="one"><a href="#">Light Linen</a></li>
                        <li class="two"><a href="#">Dark Linen</a></li>
                        <li class="four"><a href="#">Light Stone</a></li>
                        <li class="three"><a href="#">Dark Stone</a></li>
                        <li class="five"><a href="#">Light Plaid</a></li>
                        <li class="six"><a href="#">Dark Plaid</a></li>
                        <li class="seven"><a href="#">Light Shells</a></li>
                    </ul>
                </li>
            </ul>-->



        </div><!-- frame inside -->
    </div><!-- frame -->
</div><!-- top bar -->

        <div style="clear:both;"></div>		<div id="main" class="clearfix">

            <!-- grab the sidebar -->
            <div id="sidebar-wrap" class="clearfix">
                <div id="sidebar">

                    <!-- grab the logo -->
                    

                    <!-- otherwise show the site title and description -->
                    <!-- grab sidebar widgets -->
                    <div class="widget">
                        <h2 class="widgettitle">关于我</h2>
                        <div class="textwidget">我是一个普通的码农屌丝，为能在深圳安定买房而奋斗着，我会将我学的东西用笔记记录下来分享出来，也方便自己温故而知新。</div>
                    </div>	<div class="widget">
                        <div class="flickr">
                            <h2 class="widgettitle">最新笔记</h2>
                            <ul class="flickrPhotos">
                                <li><a class="lightbox" rel="flickr" href="http://www.angularjsapi.cn/hetao/a/Angularjsjiaocheng/yuanshengjsxiangjie/2016/0520/31.html" title="雅虎团队经验：网站页面">雅虎团队经验：网站页面</a></li>
<li><a class="lightbox" rel="flickr" href="http://www.angularjsapi.cn/hetao/a/Angularjsjiaocheng/yuanshengjsxiangjie/2016/0520/32.html" title="雅虎团队经验：网站页面">雅虎团队经验：网站页面</a></li>
<li><a class="lightbox" rel="flickr" href="http://www.angularjsapi.cn/hetao/a/Angularjsjiaocheng/2016/0520/28.html" title="WEB前端开发规范文档">WEB前端开发规范文档</a></li>
<li><a class="lightbox" rel="flickr" href="http://www.angularjsapi.cn/hetao/a/Angularjsjiaocheng/yuanshengjsxiangjie/2016/0519/27.html" title="js删除数组里的某个元素">js删除数组里的某个元素</a></li>
<li><a class="lightbox" rel="flickr" href="http://www.angularjsapi.cn/hetao/a/CSS/2016/0518/25.html" title="ie7下z-index失效问题解决方">ie7下z-index失效问题解决方</a></li>
<li><a class="lightbox" rel="flickr" href="http://www.angularjsapi.cn/hetao/a/CSS/2016/0518/23.html" title="Css Reset(复位)整理">Css Reset(复位)整理</a></li>
<li><a class="lightbox" rel="flickr" href="http://www.angularjsapi.cn/hetao/a/CSS/2016/0518/22.html" title="响应式web设计之CSS3 Media">响应式web设计之CSS3 Media</a></li>
<li><a class="lightbox" rel="flickr" href="http://www.angularjsapi.cn/hetao/a/CSS/2016/0518/21.html" title="CSS层叠样式表的层叠是什">CSS层叠样式表的层叠是什</a></li>
<li><a class="lightbox" rel="flickr" href="http://www.angularjsapi.cn/hetao/a/Angularjsjiaocheng/jQuery/2016/0517/19.html" title="jQuery性能优化">jQuery性能优化</a></li>
<li><a class="lightbox" rel="flickr" href="http://www.angularjsapi.cn/hetao/a/Angularjsjiaocheng/yuanshengjsxiangjie/2016/0517/18.html" title="js中“==”与＂===＂的区别">js中“==”与＂===＂的区别</a></li>
<li><a class="lightbox" rel="flickr" href="http://www.angularjsapi.cn/hetao/a/Angularjsjiaocheng/yuanshengjsxiangjie/2016/0517/17.html" title="闭包和柯里化">闭包和柯里化</a></li>
<li><a class="lightbox" rel="flickr" href="http://www.angularjsapi.cn/hetao/a/Angularjsjiaocheng/Angularjsjiaocheng/2016/0516/16.html" title="Angularjs基础(二)：过滤器">Angularjs基础(二)：过滤器</a></li>
<li><a class="lightbox" rel="flickr" href="http://www.angularjsapi.cn/hetao/a/Angularjsjiaocheng/yuanshengjsxiangjie/2016/0513/15.html" title="正则表达式基础知识">正则表达式基础知识</a></li>
<li><a class="lightbox" rel="flickr" href="http://www.angularjsapi.cn/hetao/a/Angularjsjiaocheng/yuanshengjsxiangjie/2016/0512/14.html" title="Yahoo!团队实践分享：网站">Yahoo!团队实践分享：网站</a></li>
<li><a class="lightbox" rel="flickr" href="http://www.angularjsapi.cn/hetao/a/Angularjsjiaocheng/yuanshengjsxiangjie/2016/0512/13.html" title="移动端web页面使用字体">移动端web页面使用字体</a></li>
<li><a class="lightbox" rel="flickr" href="http://www.angularjsapi.cn/hetao/a/Angularjsjiaocheng/yuanshengjsxiangjie/2016/0510/12.html" title="常用http状态码">常用http状态码</a></li>
<li><a class="lightbox" rel="flickr" href="http://www.angularjsapi.cn/hetao/a/Angularjsjiaocheng/yuanshengjsxiangjie/2016/0509/11.html" title="前端页面性能优化">前端页面性能优化</a></li>

                            </ul><div style="clear:both;"></div><a target="_blank" class="flickr-more" href="http://flickr.com/photos/64104492@N02" title="">More Photos →</a>
                        </div>
                    </div>


                </div><!--sidebar-->

                <div style="clear:both;"></div>

                <!-- grab the sticky sidebar on the main blog pages, hide it on inside pages -->

                <div id="sticky" class="clearfix">
                    <h2 class="sticky-title">作者</h2>

                    <div class="widget">
                        <div class="twitter-box">
                            <h2>核桃</h2>
                            <ul class="tweet-scroll">
                                <li>交流QQ群：252259003</li>
                            </ul>

                        </div>

                    </div><div class="widget">
                        <form action="http://www.angularjsapi.cn/hetao/a/Angularjsjiaocheng/yuanshengjsxiangjie/2016/0520/31.html#" class="search-form clearfix">
                            <fieldset>
                                <input type="text" class="search-form-input text" name="s" onfocus="if (this.value == &#39;search the site&#39;) {this.value = &#39;&#39;;}" onblur="if (this.value == &#39;&#39;) {this.value = &#39;search the site&#39;;}" value="search the site">
                                <input type="submit" value="Go" class="submit">
                            </fieldset>
                        </form>
                    </div>
                </div><!-- sticky -->


            </div><!-- sidebar wrap -->
                                                   <div id="content" class="filter-posts">
                                                       <!-- grab the posts -->

                                                       <div data-id="post-2" data-type="" class="post-2 post clearfix project">
                                                           <div class="box">
                                                               <div class="shadow clearfix">
                                                                   <div class="frame" style="width:661px">
                                                                       <h2 class="entry-title">雅虎团队经验：网站页面性能优化的 34条（一）</h2>

                                                                       <div class="okvideo">
                                                                       </div>



                                                                       <p></p><p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	1、尽量减少HTTP请求次数&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; 终端用户响应的时间中，有80%用于下载各项内容。这部分时间包括下载页面中的图像、样式表、脚本、Flash等。通过减少页面中的元素可以减少HTTP请求的次数。这是提高网页速度的关键步骤。&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; 减少页面组件的方法其实就是简化页面设计。那么有没有一种方法既能保持页面内容的丰富性又能达到加快响应时间的目的呢？这里有几条减少HTTP请求次数同时又可能保持页面内容丰富的技术。</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	合并文件是通过把所有的脚本放到一个文件中来减少HTTP请求的方法，如可以简单地把所有的CSS文件都放入一个样式表中。当脚本或者样式表在不同页面中使用时需要做不同的修改，这可能会相对麻烦点，但即便如此也要把这个方法作为改善页面性能的重要一步。</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	CSS Sprites是减少图像请求的有效方法。把所有的背景图像都放到一个图片文件中，然后通过CSS的background-image和background-position属性来显示图片的不同部分；</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	图片地图是把多张图片整合到一张图片中。虽然文件的总体大小不会改变，但是可以减少HTTP请求次数。图片地图只有在图片的所有组成部分在页面中是紧挨在一起的时候才能使用，如导航栏。确定图片的坐标和可能会比较繁琐且容易出错，同时使用图片地图导航也不具有可读性，因此不推荐这种方法；</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	内联图像是使用data:URL scheme的方法把图像数据加载页面中。这可能会增加页面的大小。把内联图像放到样式表（可缓存）中可以减少HTTP请求同时又避免增加页面文件的大小。但是内联图像现在还没有得到主流浏览器的支持。</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	&nbsp;&nbsp;&nbsp; 减少页面的HTTP请求次数是你首先要做的一步。这是改进首次访问用户等待时间的最重要的方法。如同Tenni Theurer的他的博客Browser Cahe Usage - Exposed!中所说，HTTP请求在无缓存情况下占去了40%到60%的响应时间。让那些初次访问你网站的人获得更加快速的体验吧！</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	2、减少DNS查找次数&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 域名系统（DNS）提供了域名和IP的对应关系，就像电话本中人名和他们的电话号码的关系一样。当你在浏览器地址栏中输入<a href="http://www.dudo.org/" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);">www.dudo.org</a>时，DNS解析服务器就会返回这个域名对应的IP地址。DNS解析的过程同样也是需要时间的。一般情况下返回给定域名对应的IP地址会花费20到120毫秒的时间。而且在这个过程中浏览器什么都不会做直到DNS查找完毕。</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 缓存DNS查找可以改善页面性能。这种缓存需要一个特定的缓存服务器，这种服务器一般属于用户的ISP提供商或者本地局域网控制，但是它同样会在用户使用的计算机上产生缓存。DNS信息会保留在操作系统的DNS缓存中（微软Windows系统中DNS Client Service）。大多数浏览器有独立于操作系统以外的自己的缓存。由于浏览器有自己的缓存记录，因此在一次请求中它不会受到操作系统的影响。</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	&nbsp;&nbsp;&nbsp;&nbsp; Internet Explorer默认情况下对DNS查找记录的缓存时间为30分钟，它在注册表中的键值为DnsCacheTimeout。Firefox对DNS的查找记录缓存时间为1分钟，它在配置文件中的选项为network.dnsCacheExpiration（Fasterfox把这个选项改为了1小时）。</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	&nbsp;&nbsp;&nbsp;&nbsp; 当客户端中的DNS缓存都为空时（浏览器和操作系统都为空），DNS查找的次数和页面中主机名的数量相同。这其中包括页面中URL、图片、脚本文件、样式表、Flash对象等包含的主机名。减少主机名的数量可以减少DNS查找次数。</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	&nbsp;&nbsp;&nbsp;&nbsp; 减少主机名的数量还可以减少页面中并行下载的数量。减少DNS查找次数可以节省响应时间，但是减少并行下载却会增加响应时间。我的指导原则是把这些页面中的内容分割成至少两部分但不超过四部分。这种结果就是在减少DNS查找次数和保持较高程度并行下载两者之间的权衡了。</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	3、避免跳转&nbsp;<br style="margin: 0px; padding: 0px;">
	跳转是使用301和302代码实现的。下面是一个响应代码为301的HTTP头：&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; HTTP/1.1 301 Moved Permanently&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; Location:&nbsp;<a href="http://example.com/newuri" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);">http://example.com/newuri</a>&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; Content-Type: text/html&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; 浏览器会把用户指向到Location中指定的URL。头文件中的所有信息在一次跳转中都是必需的，内容部分可以为空。不管他们的名称，301和302响应都不会被缓存除非增加一个额外的头选项，如Expires或者Cache-Control来指定它缓存。&lt;meat /&gt;元素的刷新标签和JavaScript也可以实现URL的跳转，但是如果你必须要跳转的时候，最好的方法就是使用标准的3XXHTTP状态代码，这主要是为了确保“后退”按钮可以正确地使用。</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	&nbsp;&nbsp;&nbsp;&nbsp; 但是要记住跳转会降低用户体验。在用户和HTML文档中间增加一个跳转，会拖延页面中所有元素的显示，因为在HTML文件被加载前任何文件（图像、Flash等）都不会被下载。</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	&nbsp;&nbsp;&nbsp;&nbsp; 有一种经常被网页开发者忽略却往往十分浪费响应时间的跳转现象。这种现象发生在当URL本该有斜杠（/）却被忽略掉时。例如，当我们要访问<a href="http://astrology.yahoo.com/astrology" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);">http://astrology.yahoo.com/astrology</a>&nbsp;时，实际上返回的是一个包含301代码的跳转，它指向的是<a href="http://astrology.yahoo.com/astrology/" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);">http://astrology.yahoo.com/astrology/</a>&nbsp; （注意末尾的斜杠）。在Apache服务器中可以使用Alias 或者 mod_rewrite或者the DirectorySlash来避免。</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	&nbsp;&nbsp;&nbsp;&nbsp; 连接新网站和旧网站是跳转功能经常被用到的另一种情况。这种情况下往往要连接网站的不同内容然后根据用户的不同类型（如浏览器类型、用户账号所属类型）来进行跳转。使用跳转来实现两个网站的切换十分简单，需要的代码量也不多。尽管使用这种方法对于开发者来说可以降低复杂程度，但是它同样降低用户体验。一个可替代方法就是如果两者在同一台服务器上时使用Alias和mod_rewrite和实现。如果是因为域名的不同而采用跳转，那么可以通过使用Alias或者mod_rewirte建立CNAME（保存一个域名和另外一个域名之间关系的DNS记录）来替代。</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	4、可缓存的AJAX&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; Ajax经常被提及的一个好处就是由于其从后台服务器传输信息的异步性而为用户带来的反馈的即时性。但是，使用Ajax并不能保证用户不会在等待异步的JavaScript和XML响应上花费时间。在很多应用中，用户是否需要等待响应取决于Ajax如何来使用。例如，在一个基于Web的Email客户端中，用户必须等待Ajax返回符合他们条件的邮件查询结果。记住一点，“异步”并不异味着“即时”，这很重要。</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	&nbsp;&nbsp;&nbsp;&nbsp; 为了提高性能，优化Ajax响应是很重要的。提高Ajxa性能的措施中最重要的方法就是使响应具有可缓存性，具体的讨论可以查看Add an Expires or a Cache-Control Header。其它的几条规则也同样适用于Ajax：&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp; Gizp压缩文件&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp; 减少DNS查找次数&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp; 精简JavaScript&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp; 避免跳转&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp; 配置ETags</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	&nbsp;&nbsp;&nbsp; 让我们来看一个例子：一个Web2.0的Email客户端会使用Ajax来自动完成对用户地址薄的下载。如果用户在上次使用过Email web应用程序后没有对地址薄作任何的修改，而且Ajax响应通过Expire或者Cacke-Control头来实现缓存，那么就可以直接从上一次的缓存中读取地址薄了。必须告知浏览器是使用缓存中的地址薄还是发送一个新的请求。这可以通过为读取地址薄的Ajax URL增加一个含有上次编辑时间的时间戳来实现，例如，&amp;t=11900241612等。如果地址薄在上次下载后没有被编辑过，时间戳就不变，则从浏览器的缓存中加载从而减少了一次HTTP请求过程。如果用户修改过地址薄，时间戳就会用来确定新的URL和缓存响应并不匹配，浏览器就会重要请求更新地址薄。&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 即使你的Ajxa响应是动态生成的，哪怕它只适用于一个用户，那么它也应该被缓存起来。这样做可以使你的Web2.0应用程序更加快捷。</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	5、推迟加载内容&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 你可以仔细看一下你的网页，问问自己“哪些内容是页面呈现时所必需首先加载的？哪些内容和结构可以稍后再加载？&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 把整个过程按照onload事件分隔成两部分，JavaScript是一个理想的选择。例如，如果你有用于实现拖放和动画的JavaScript，那么它就以等待稍后加载，因为页面上的拖放元素是在初始化呈现之后才发生的。其它的例如隐藏部分的内容（用户操作之后才显现的内容）和处于折叠部分的图像也可以推迟加载&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 工具可以节省你的工作量：YUI Image Loader可以帮你推迟加载折叠部分的图片，YUI Get utility是包含JS和 CSS的便捷方法。比如你可以打开Firebug的Net选项卡看一下Yahoo的首页。&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 当性能目标和其它网站开发实践一致时就会相得益彰。这种情况下，通过程序提高网站性能的方法告诉我们，在支持JavaScript的情况下，可以先去除用户体验，不过这要保证你的网站在没有JavaScript也可以正常运行。在确定页面运行正常后，再加载脚本来实现如拖放和动画等更加花哨的效果。</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	6、预加载&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 预加载和后加载看起来似乎恰恰相反，但实际上预加载是为了实现另外一种目标。预加载是在浏览器空闲时请求将来可能会用到的页面内容（如图像、样式表和脚本）。使用这种方法，当用户要访问下一个页面时，页面中的内容大部分已经加载到缓存中了，因此可以大大改善访问速度。</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	下面提供了几种预加载方法：&nbsp;<br style="margin: 0px; padding: 0px;">
	无条件加载：触发onload事件时，直接加载额外的页面内容。以Google.com为例，你可以看一下它的spirit image图像是怎样在onload中加载的。这个spirit image图像在google.com主页中是不需要的，但是却可以在搜索结果页面中用到它。&nbsp;<br style="margin: 0px; padding: 0px;">
	有条件加载：根据用户的操作来有根据地判断用户下面可能去往的页面并相应的预加载页面内容。在search.yahoo.com中你可以看到如何在你输入内容时加载额外的页面内容。&nbsp;<br style="margin: 0px; padding: 0px;">
	有预期的加载：载入重新设计过的页面时使用预加载。这种情况经常出现在页面经过重新设计后用户抱怨“新的页面看起来很酷，但是却比以前慢”。问题可能出在用户对于你的旧站点建立了完整的缓存，而对于新站点却没有任何缓存内容。因此你可以在访问新站之前就加载一部内容来避免这种结果的出现。在你的旧站中利用浏览器的空余时间加载新站中用到的图像的和脚本来提高访问速度。</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	7、减少DOM元素数量&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 一个复杂的页面意味着需要下载更多数据，同时也意味着JavaScript遍历DOM的效率越慢。比如当你增加一个事件句柄时在500和5000个DOM元素中循环效果肯定是不一样的。&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 大量的DOM元素的存在意味着页面中有可以不用移除内容只需要替换元素标签就可以精简的部分。你在页面布局中使用表格了吗？你有没有仅仅为了布局而引入更多的&lt;div&gt;元素呢？也许会存在一个适合或者在语意是更贴切的标签可以供你使用。&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; YUI CSS utilities可以给你的布局带来巨大帮助：grids.css可以帮你实现整体布局，font.css和reset.css可以帮助你移除浏览器默认格式。它提供了一个重新审视你页面中标签的机会，比如只有在语意上有意义时才使用&lt;div&gt;，而不是因为它具有换行效果才使用它。&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; DOM元素数量很容易计算出来，只需要在Firebug的控制台内输入：&nbsp;<br style="margin: 0px; padding: 0px;">
	document.getElementsByTagName('*').length&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 那么多少个DOM元素算是多呢？这可以对照有很好标记使用的类似页面。比如Yahoo!主页是一个内容非常多的页面，但是它只使用了700个元素（HTML标签）。</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	8、根据域名划分页面内容&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; 把页面内容划分成若干部分可以使你最大限度地实现平行下载。由于DNS查找带来的影响你首先要确保你使用的域名数量在2个到4个之间。例如，你可以把用到的HTML内容和动态内容放在<a href="http://www.example.org/" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);">www.example.org</a>上，而把页面各种组件（图片、脚本、CSS)分别存放在statics1.example.org和statics.example.org上。&nbsp;<br style="margin: 0px; padding: 0px;">
	你可在Tenni Theurer和Patty Chi合写的文章Maximizing Parallel Downloads in the Carpool Lane找到更多相关信息。</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	9、使iframe的数量最小&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; ifrmae元素可以在父文档中插入一个新的HTML文档。了解iframe的工作理然后才能更加有效地使用它，这一点很重要。</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	&lt;iframe&gt;优点：<br style="margin: 0px; padding: 0px;">
	解决加载缓慢的第三方内容如图标和广告等的加载问题&nbsp;<br style="margin: 0px; padding: 0px;">
	Security sandbox&nbsp;<br style="margin: 0px; padding: 0px;">
	并行加载脚本&nbsp;<br style="margin: 0px; padding: 0px;">
	&lt;iframe&gt;的缺点：</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	即时内容为空，加载也需要时间&nbsp;<br style="margin: 0px; padding: 0px;">
	会阻止页面加载&nbsp;<br style="margin: 0px; padding: 0px;">
	没有语意&nbsp;<br style="margin: 0px; padding: 0px;">
	10、不要出现404错误&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; HTTP请求时间消耗是很大的，因此使用HTTP请求来获得一个没有用处的响应（例如404没有找到页面）是完全没有必要的，它只会降低用户体验而不会有一点好处。&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; 有些站点把404错误响应页面改为“你是不是要找***”，这虽然改进了用户体验但是同样也会浪费服务器资源（如数据库等）。最糟糕的情况是指向外部JavaScript的链接出现问题并返回404代码。首先，这种加载会破坏并行加载；其次浏览器会把试图在返回的404响应内容中找到可能有用的部分当作JavaScript代码来执行。</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	11、使用内容分发网络&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; 用户与你网站服务器的接近程度会影响响应时间的长短。把你的网站内容分散到多个、处于不同地域位置的服务器上可以加快下载速度。但是首先我们应该做些什么呢？&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; 按地域布置网站内容的第一步并不是要尝试重新架构你的网站让他们在分发服务器上正常运行。根据应用的需求来改变网站结构，这可能会包括一些比较复杂的任务，如在服务器间同步Session状态和合并数据库更新等。要想缩短用户和内容服务器的距离，这些架构步骤可能是不可避免的。&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; 要记住，在终端用户的响应时间中有80%到90%的响应时间用于下载图像、样式表、脚本、Flash等页面内容。这就是网站性能黄金守则。和重新设计你的应用程序架构这样比较困难的任务相比，首先来分布静态内容会更好一点。这不仅会缩短响应时间，而且对于内容分发网络来说它更容易实现。&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; 内容分发网络（Content Delivery Network，CDN）是由一系列分散到各个不同地理位置上的Web服务器组成的，它提高了网站内容的传输速度。用于向用户传输内容的服务器主要是根据和用户在网络上的靠近程度来指定的。例如，拥有最少网络跳数（network hops）和响应速度最快的服务器会被选定。&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; 一些大型的网络公司拥有自己的CDN，但是使用像Akamai Technologies，Mirror Image Internet， 或者Limelight Networks这样的CDN服务成本却非常高。对于刚刚起步的企业和个人网站来说，可能没有使用CDN的成本预算，但是随着目标用户群的不断扩大和更加全球化，CDN就是实现快速响应所必需的了。以Yahoo来说，他们转移到CDN上的网站程序静态内容节省了终端用户20%以上的响应时间。使用CDN是一个只需要相对简单地修改代码实现显著改善网站访问速度的方法。</p>
<p style="margin: 10px auto; padding: 0px; color: rgb(51, 51, 51); font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px;">
	12、为文件头指定Expires或Cache-Control&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; 这条守则包括两方面的内容：&nbsp;<br style="margin: 0px; padding: 0px;">
	对于静态内容：设置文件头过期时间Expires的值为“Never expire”（永不过期）&nbsp;<br style="margin: 0px; padding: 0px;">
	对于动态内容：使用恰当的Cache-Control文件头来帮助浏览器进行有条件的请求&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; 网页内容设计现在越来越丰富，这就意味着页面中要包含更多的脚本、样式表、图片和Flash。第一次访问你页面的用户就意味着进行多次的HTTP请求，但是通过使用Expires文件头就可以使这样内容具有缓存性。它避免了接下来的页面访问中不必要的HTTP请求。Expires文件头经常用于图像文件，但是应该在所有的内容都使用他，包括脚本、样式表和Flash等。&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; 浏览器（和代理）使用缓存来减少HTTP请求的大小和次数以加快页面访问速度。Web服务器在HTTP响应中使用Expires文件头来告诉客户端内容需要缓存多长时间。下面这个例子是一个较长时间的Expires文件头，它告诉浏览器这个响应直到2010年4月15日才过期。&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; Expires: Thu, 15 Apr 2010 20:00:00 GMT&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; 如果你使用的是Apache服务器，可以使用ExpiresDefault来设定相对当前日期的过期时间。下面这个例子是使用ExpiresDefault来设定请求时间后10年过期的文件头：&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; ExpiresDefault "access plus 10 years"&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; 要切记，如果使用了Expires文件头，当页面内容改变时就必须改变内容的文件名。依Yahoo!来说我们经常使用这样的步骤：在内容的文件名中加上版本号，如yahoo_2.0.6.js。&nbsp;<br style="margin: 0px; padding: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp; 使用Expires文件头只有会在用户已经访问过你的网站后才会起作用。当用户首次访问你的网站时这对减少HTTP请求次数来说是无效的，因为浏览器的缓存是空的。因此这种方法对于你网站性能的改进情况要依据他们“预缓存”存在时对你页面的点击频率（“预缓存”中已经包含了页面中的所有内容）。Yahoo!建立了一套测量方法，我们发现所有的页面浏览量中有75~85%都有“预缓存”。通过使用Expires文件头，增加了缓存在浏览器中内容的数量，并且可以在用户接下来的请求中再次使用这些内容，这甚至都不需要通过用户发送一个字节的请求。</p>
<p></p>
                                                                   </div><!-- frame -->
                                                               </div><!-- shadow -->
                                                               <!-- meta info bar -->
                                                               <div class="bar" style="display:none;">
                                                                   <div class="bar-frame clearfix">
                                                                       <div class="date">
                                                                           <strong class="day">17</strong>
                                                                           <div class="holder">
                                                                               <span class="month">Jul</span>
                                                                               <span class="year">2011</span>
                                                                           </div>
                                                                       </div>
                                                                       <div class="author">
                                                                           <strong class="title">AUTHOR</strong>
                                                                           <a href="http://mikemcalister.com/" title="Visit Mike McAlister’s website" rel="external">Mike McAlister</a>
                                                                       </div>
                                                                       <div class="categories">
                                                                           <strong class="title">CATEGORY</strong>
                                                                           <p></p>
                                                                       </div>
                                                                       <div class="comments">
                                                                           <strong class="title">COMMENTS</strong>
                                                                           <a href="http://okaythemes.com/dispatch/?page_id=2/#comments">No Comments</a>
                                                                       </div>


                                                                   </div><!-- bar frame -->
                                                               </div><!-- bar -->
                                                           </div><!-- box -->
                                                       </div><!--writing post-->

                                                       <div style="clear:both;"> </div>

                                                       <div class="post-nav">
                                                           <div class="postnav-left"></div>
                                                           <div class="postnav-right"></div>
                                                           <div style="clear:both;"> </div>
                                                       </div><!--end post navigation-->
                                                       <!-- grab comments on single pages -->
                                                   </div><!--content-->
            <div class="push"></div>
        </div><!--main-->
        <!-- grab footer -->
        <div id="footer" class="clearfix">
            <div class="frame">
                <div class="bar" style="text-align:center">
                    <p class="copyright">粤ICP备 16004646号</p>
                    
                </div><!--bar-->
            </div><!--frame-->
        </div><!--footer-->
    </div><!-- wrapper -->
    <!-- google analytics code -->

    <script type="text/javascript" src="./雅虎团队经验：网站页面性能优化的 34条（一）_files/jquery.fancybox-1.3.4.pack.js"></script>
    <script type="text/javascript" src="./雅虎团队经验：网站页面性能优化的 34条（一）_files/jquery.sticky.js"></script>
    <script type="text/javascript" src="./雅虎团队经验：网站页面性能优化的 34条（一）_files/jquery-css-transform.js"></script>
    <script type="text/javascript" src="./雅虎团队经验：网站页面性能优化的 34条（一）_files/jquery.easing.1.3.js"></script>
    <script type="text/javascript" src="./雅虎团队经验：网站页面性能优化的 34条（一）_files/quicksand.js"></script>
    <script type="text/javascript">
        /* <![CDATA[  */

        var J = jQuery.noConflict();

        J(document).ready(function () {

            // Drop Menu
            function mainmenu() {
                J(".nav ul ").css({ display: "none" }); // Opera Fix
                J(".nav li").hover(function () {
                    J(this).find('ul:first').css({ visibility: "visible", display: "none" }).slideDown(200);
                }, function () {
                    J(this).find('ul:first').css({ visibility: "hidden" });
                });
            }

            mainmenu();

            // Fade Icons
            J("img.a").hover(
                function () {
                    J(this).stop().animate({ "opacity": "0" }, "fast");
                },
                function () {
                    J(this).stop().animate({ "opacity": "1" }, "fast");
                });

            // Fade Hover Links
            J(".entry-title a").hover(
            function () {
                J(this).animate({ "opacity": ".7" }, "fast");
            },
                function () {
                    J(this).animate({ "opacity": "1" }, "fast");
                });

            // Remove Margins
            J(".flickrPhotos > li:nth-child(2n)").addClass('remove-margin');
            J('#sidebar > div').last().addClass('last-sidebar');

            // Sticky Sidebar
            J('#sticky > div').last().addClass('last-sidebar');
            J("#sticky").sticky({ topSpacing: 90, className: 'sticky' });

            J(".lightbox").fancybox({
                'titlePosition': 'outside',
                'overlayColor': '#ddd',
                'overlayOpacity': 0.9,
                'titleShow': 'false',
                'transitionIn': 'elastic',
                'transitionOut': 'elastic',
                'speedIn': '1400',
                'speedOut': '1400',
                'easingIn': 'easeOutBounce',
                'easingOut': 'easeOutBounce'
            });

            // Quicksand Filtering
            var $data = J(".filter-posts").clone();

            J('.filter-list li').click(function (e) {
                J(".filter li").removeClass("active");
                // Use the last category class as the category to filter by.
                var filterClass = J(this).attr('class').split(' ').slice(-1)[0];

                if (filterClass == 'all-projects') {
                    var $filteredData = $data.find('.project');
                } else {
                    var $filteredData = $data.find('.project[data-type=' + filterClass + ']');
                }
                J(".filter-posts").quicksand($filteredData, {
                    duration: 700,
                    easing: 'jswing',
                    adjustHeight: 'dynamic'
                });
                J(this).addClass("active");
                return false;
            });
        });
        /* ]]> */
    </script>

    <style type="text/css">
        .light-linen {
            background: #333 url(images/bg_light_linen.png) fixed;
        }

        .dark-linen {
            background: #333 url(images/bg_dark_linen.png) fixed;
        }

        .dark-stone {
            background: #32363b url(images/bg_stone_dark.png) fixed;
        }

        .light-stone {
            background: #eee url(images/bg_stone.png) fixed;
        }

        .light-plaid {
            background: #ccc url(images/bg_plaid.png) fixed;
        }

        .dark-plaid {
            background: #323232 url(images/bg_dark_plaid.png) fixed;
        }

        .light-scales {
            background: #eee url(images/bg_scales.png) fixed;
        }
    </style>

    <script type="text/javascript">
        /* <![CDATA[  */

        var J = jQuery.noConflict();

        J(document).ready(function () {

            //Style Switcher
            J("li.one").click(function () {
                J
                    ("body").removeClass('dark-linen , dark-stone , light-stone , light-plaid , dark-plaid , light-scales').addClass("light-linen");
            });

            J("li.two").click(function () {
                J
                    ("body").removeClass('light-linen , dark-stone , light-stone , light-plaid , dark-plaid , light-scales').addClass("dark-linen");
            });

            J("li.three").click(function () {
                J
                    ("body").removeClass("light-linen , dark-linen , light-stone , light-plaid , dark-plaid , light-scales").addClass("dark-stone");
            });

            J("li.four").click(function () {
                J
                    ("body").removeClass("light-linen , dark-linen , dark-stone , light-plaid , dark-plaid , light-scales").addClass("light-stone");
            });

            J("li.five").click(function () {
                J
                    ("body").removeClass("light-linen , dark-linen , dark-stone , light-stone , dark-plaid , light-scales").addClass("light-plaid");
            });

            J("li.six").click(function () {
                J
                    ("body").removeClass("light-linen , dark-linen , dark-stone , light-stone , light-plaid , light-scales").addClass("dark-plaid");
            });

            J("li.seven").click(function () {
                J
                    ("body").removeClass("light-linen , dark-linen , dark-stone , light-stone , light-plaid , dark-plaid").addClass("light-scales");
            });

        });
        /* ]]> */
    </script>

</body></html>